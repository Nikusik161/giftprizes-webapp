<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiftPrises - NFT –ü–æ–¥–∞—Ä–∫–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --text: #ffffff;
            --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        [data-theme="light"] {
            --primary: #4f46e5;
            --secondary: #7c3aed;
            --accent: #ec4899;
            --text: #1f2937;
            --bg: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --text-secondary: rgba(0, 0, 0, 0.7);
        }

        [data-theme="light-purple"] {
            --primary: #a78bfa;
            --secondary: #c4b5fd;
            --accent: #8b5cf6;
            --text: #1f2937;
            --bg: linear-gradient(135deg, #e9d5ff 0%, #ddd6fe 100%);
            --card-bg: rgba(255, 255, 255, 0.9);
            --shadow: 0 8px 32px rgba(168, 85, 247, 0.1);
            --text-secondary: rgba(0, 0, 0, 0.7);
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        [data-theme="dark"] {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --text: #f3f4f6;
            --bg: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            --card-bg: rgba(255, 255, 255, 0.08);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: var(--transition);
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .theme-switcher {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--card-bg);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            color: var(--text);
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .theme-switcher:hover {
            transform: rotate(180deg) scale(1.1);
        }

        .theme-switcher.rotating {
            animation: themeSwitch 0.6s ease-in-out;
        }

        .logo {
            font-size: 4rem;
            margin-bottom: 10px;
            display: inline-block;
            animation: bounce 2s infinite, glow 3s infinite alternate;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
        }

        .title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textShine 3s ease-in-out infinite;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            margin-bottom: 30px;
            animation: fadeIn 2s ease-out;
        }

        /* Navigation Grid */
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 30px;
        }

        .nav-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            animation: slideUp 0.6s ease-out;
        }

        .nav-card:nth-child(1) { animation-delay: 0.1s; }
        .nav-card:nth-child(2) { animation-delay: 0.2s; }
        .nav-card:nth-child(3) { animation-delay: 0.3s; }
        .nav-card:nth-child(4) { animation-delay: 0.4s; }
        .nav-card:nth-child(5) { animation-delay: 0.5s; }

        .nav-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }

        .nav-card:hover::before {
            left: 100%;
        }

        .nav-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .nav-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            display: block;
            animation: float 3s ease-in-out infinite;
        }

        .nav-card:nth-child(1) .nav-icon { animation-delay: 0s; }
        .nav-card:nth-child(2) .nav-icon { animation-delay: 0.5s; }
        .nav-card:nth-child(3) .nav-icon { animation-delay: 1s; }
        .nav-card:nth-child(4) .nav-icon { animation-delay: 1.5s; }
        .nav-card:nth-child(5) .nav-icon { animation-delay: 2s; }

        .nav-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .nav-desc {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        /* Statistics Dashboard */
        .stats-dashboard {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.8s ease-out;
        }

        .stats-dashboard h3 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent);
            font-size: 1.3rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
            animation: countUp 1s ease-out;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .user-list, .gift-list {
            max-height: 120px;
            overflow-y: auto;
        }

        .user-item, .gift-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            margin-bottom: 5px;
            transition: var(--transition);
        }

        .user-item:hover, .gift-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .user-rank, .gift-rank {
            font-weight: 600;
            color: var(--accent);
            min-width: 20px;
        }

        .user-name, .gift-name {
            font-weight: 600;
            font-size: 0.9rem;
            flex: 1;
            margin: 0 10px;
        }

        .user-amount, .gift-sales {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Admin Panel */
        .admin-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .admin-section {
            margin-bottom: 30px;
        }

        .admin-section h3 {
            margin-bottom: 15px;
            color: var(--accent);
        }

        .toggle-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .toggle-btn {
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle-btn.disabled {
            background: #ef4444;
            color: white;
        }

        .toggle-btn.enabled {
            background: #10b981;
            color: white;
        }

        /* Gift Cards */
        .gift-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            transition: var(--transition);
        }

        .gift-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }

        .gift-image {
            text-align: center;
            margin-bottom: 15px;
        }

        .gift-image img {
            width: 120px;
            height: 120px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .gift-info {
            text-align: center;
        }

        .gift-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .gift-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .gift-market {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .gift-rarity {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .gift-rarity.common { background: rgba(255,255,255,0.1); }
        .gift-rarity.rare { background: rgba(59, 130, 246, 0.3); }
        .gift-rarity.epic { background: rgba(168, 85, 247, 0.3); }
        .gift-rarity.legendary { background: rgba(245, 158, 11, 0.3); }

        .buy-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .buy-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            background: rgba(255,255,255,0.15);
            box-shadow: 0 0 0 2px var(--accent);
        }

        .form-hint {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 5px;
        }

        /* Search Screen */
        .search-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            margin: 20px 0;
            animation: slideUp 0.6s ease-out;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
            color: var(--text);
            font-size: 1rem;
            margin-bottom: 15px;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(240, 147, 251, 0.3);
        }

        .budget-value {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 10px 0;
        }

        .budget-slider {
            width: 100%;
            margin: 20px 0;
        }

        .budget-large {
            font-size: 1.1rem;
            color: var(--accent);
            font-weight: 600;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(240, 147, 251, 0.1);
            border-radius: 10px;
            display: none;
        }

        /* Purchase Screens */
        .purchase-container, .payment-container, .confirmation-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .purchase-form {
            margin-top: 20px;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        .purchase-summary {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-item.total {
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 10px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .payment-amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            text-align: center;
            margin: 20px 0;
        }

        .wallet-address {
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            word-break: break-all;
            font-family: monospace;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .payment-steps {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .payment-steps ol {
            margin-left: 20px;
            margin-top: 10px;
        }

        .payment-steps li {
            margin-bottom: 8px;
        }

        .confirmation-icon {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 20px;
        }

        .confirmation-details {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .confirmation-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        /* Action Buttons */
        .action-buttons {
            display: grid;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-size: 1rem;
        }

        .action-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .action-btn.secondary {
            background: var(--card-bg);
            color: var(--text);
        }

        /* Back Button */
        .back-button {
            background: var(--card-bg);
            border: none;
            color: var(--text);
            padding: 12px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .back-button:hover {
            transform: translateX(-5px);
        }

        /* Loading and Messages */
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.1rem;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            opacity: 0.7;
            font-size: 1.1rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            max-width: 300px;
            animation: slideInRight 0.3s ease-out;
        }

        .notification.success {
            background: var(--success);
            color: white;
        }

        .notification.error {
            background: var(--error);
            color: white;
        }

        .notification.warning {
            background: var(--warning);
            color: white;
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        /* Features */
        .features {
            margin: 30px 0;
        }

        .feature {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            animation: slideUp 0.6s ease-out;
        }

        .feature-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            animation: bounce 2s infinite;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            opacity: 0.6;
            font-size: 0.9rem;
        }

        /* User Statistics */
        .user-stats-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .user-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .user-stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: var(--transition);
        }

        .user-stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .user-stat-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .user-stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .user-purchases-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .user-purchase-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            margin-bottom: 8px;
            transition: var(--transition);
        }

        .user-purchase-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .purchase-status {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 6px;
        }

        .purchase-status.completed {
            background: rgba(16, 185, 129, 0.3);
            color: var(--success);
        }

        .purchase-status.cancelled {
            background: rgba(239, 68, 68, 0.3);
            color: var(--error);
        }

        .purchase-status.pending {
            background: rgba(245, 158, 11, 0.3);
            color: var(--warning);
        }

        /* Alert Items */
        .alert-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .alert-item.success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.5);
            color: var(--success);
        }

        .alert-item.warning {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.5);
            color: var(--warning);
        }

        .alert-item.info {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            color: #3b82f6;
        }

        .alert-item i {
            margin-right: 10px;
            font-size: 1.1rem;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideOutRight {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(30px); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0) scale(1); }
            40% { transform: translateY(-10px) scale(1.1); }
            60% { transform: translateY(-5px) scale(1.05); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.6)); }
        }

        @keyframes textShine {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes themeSwitch {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        @keyframes countUp {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .nav-grid, .stats-grid, .user-stats-grid {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .logo {
                font-size: 3rem;
            }
            
            .toggle-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div class="screen active" id="main-screen">
            <div class="header">
                <button class="theme-switcher" onclick="switchTheme()" id="theme-btn">
                    <i class="fas fa-palette"></i>
                </button>
                
                <div class="logo">üéÅ</div>
                <h1 class="title">GiftPrises</h1>
                <p class="subtitle">–¢–≤–æ–π –º–∏—Ä —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö NFT –ø–æ–¥–∞—Ä–∫–æ–≤</p>
            </div>

            <div class="nav-grid">
                <div class="nav-card" onclick="loadRealGifts()" id="catalog-btn">
                    <div class="nav-icon">üìö</div>
                    <div class="nav-title">–ö–∞—Ç–∞–ª–æ–≥ NFT</div>
                    <div class="nav-desc">–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤</div>
                </div>
                
                <div class="nav-card" onclick="showScreen('search-screen')" id="search-btn">
                    <div class="nav-icon">üîç</div>
                    <div class="nav-title">–ü–æ–∏—Å–∫</div>
                    <div class="nav-desc">–ù–∞–π–¥–∏ –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫</div>
                </div>
                
                <div class="nav-card" onclick="showScreen('budget-screen')" id="budget-btn">
                    <div class="nav-icon">üí∞</div>
                    <div class="nav-title">–ë—é–¥–∂–µ—Ç</div>
                    <div class="nav-desc">–£—Å—Ç–∞–Ω–æ–≤–∏ –ª–∏–º–∏—Ç</div>
                </div>
                
                <div class="nav-card" onclick="showScreen('sell-screen')" id="sell-btn">
                    <div class="nav-icon">üíé</div>
                    <div class="nav-title">–ü—Ä–æ–¥–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫</div>
                    <div class="nav-desc">–û—Ü–µ–Ω–∏ –∏ –ø—Ä–æ–¥–∞–π —Å–≤–æ–π NFT</div>
                </div>

                <div class="nav-card" onclick="showScreen('admin-screen')" id="admin-btn">
                    <div class="nav-icon">‚öôÔ∏è</div>
                    <div class="nav-title">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</div>
                    <div class="nav-desc">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º</div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-dashboard">
                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h3>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-users">1,247</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="today-online">89</div>
                        <div class="stat-label">–°–µ–≥–æ–¥–Ω—è –æ–Ω–ª–∞–π–Ω</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="daily-turnover">2,450 TON</div>
                        <div class="stat-label">–û–±–æ—Ä–æ—Ç –∑–∞ –¥–µ–Ω—å</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="gifts-sold">156</div>
                        <div class="stat-label">–ü–æ–¥–∞—Ä–∫–æ–≤ –∫—É–ø–ª–µ–Ω–æ</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <h4 style="margin-bottom: 10px; color: var(--accent);">üèÜ –¢–æ–ø –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h4>
                        <div class="user-list" id="top-buyers">
                            <div class="user-item">
                                <span class="user-rank">1</span>
                                <span class="user-name">@crypto_lover</span>
                                <span class="user-amount">1,200 TON</span>
                            </div>
                            <div class="user-item">
                                <span class="user-rank">2</span>
                                <span class="user-name">@nft_collector</span>
                                <span class="user-amount">980 TON</span>
                            </div>
                            <div class="user-item">
                                <span class="user-rank">3</span>
                                <span class="user-name">@gift_master</span>
                                <span class="user-amount">750 TON</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="margin-bottom: 10px; color: var(--accent);">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h4>
                        <div class="gift-list" id="popular-gifts">
                            <div class="gift-item">
                                <span class="gift-rank">1</span>
                                <span class="gift-name">–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω</span>
                                <span class="gift-sales">45 —à—Ç</span>
                            </div>
                            <div class="gift-item">
                                <span class="gift-rank">2</span>
                                <span class="gift-name">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å</span>
                                <span class="gift-sales">32 —à—Ç</span>
                            </div>
                            <div class="gift-item">
                                <span class="gift-rank">3</span>
                                <span class="gift-name">–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª</span>
                                <span class="gift-sales">28 —à—Ç</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <span class="feature-icon">‚ö°</span>
                    –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ NFT –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ Telegram
                </div>
                <div class="feature">
                    <span class="feature-icon">üé®</span>
                    –†–µ–∞–ª—å–Ω—ã–µ NFT —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤ –ø–æ –ª—É—á—à–∏–º —Ü–µ–Ω–∞–º
                </div>
                <div class="feature">
                    <span class="feature-icon">üí´</span>
                    –ü—Ä–æ–¥–∞–∂–∞ –∏ –æ—Ü–µ–Ω–∫–∞ –≤–∞—à–∏—Ö NFT –ø–æ–¥–∞—Ä–∫–æ–≤
                </div>
                <div class="feature">
                    <span class="feature-icon">üõ°Ô∏è</span>
                    –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ —á–µ—Ä–µ–∑ TON –±–ª–æ–∫—á–µ–π–Ω
                </div>
            </div>

            <div class="footer">
                Powered by Telegram WebApp ‚Ä¢ GiftPrises 2024
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div class="screen" id="admin-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
            
            <div class="admin-panel">
                <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="admin-section">
                    <h3>üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="admin-total-users">1,247</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="admin-total-sales">892</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–∂</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="admin-total-revenue">15,640 TON</div>
                            <div class="stat-label">–û–±—â–∏–π –¥–æ—Ö–æ–¥</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="admin-active-users">89</div>
                            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è</div>
                        </div>
                    </div>
                </div>

                <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                <div class="admin-section">
                    <h3>üìà –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div class="user-stats-grid">
                        <div class="user-stat-card">
                            <div class="user-stat-value" id="new-users-today">23</div>
                            <div class="user-stat-label">–ù–æ–≤—ã—Ö —Å–µ–≥–æ–¥–Ω—è</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-value" id="avg-session-time">8.5–º</div>
                            <div class="user-stat-label">–°—Ä–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-value" id="conversion-rate">12.4%</div>
                            <div class="user-stat-label">–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫–∏</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-value" id="retention-rate">64.7%</div>
                            <div class="user-stat-label">–£–¥–µ—Ä–∂–∞–Ω–∏–µ (7 –¥–Ω–µ–π)</div>
                        </div>
                    </div>
                </div>

                <!-- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
                <div class="admin-section">
                    <h3>üí≥ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="avg-order-value">127.5 TON</div>
                            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="revenue-per-user">18.3 TON</div>
                            <div class="stat-label">–î–æ—Ö–æ–¥ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="profit-margin">28.6%</div>
                            <div class="stat-label">–ú–∞—Ä–∂–∞ –ø—Ä–∏–±—ã–ª–∏</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="refund-rate">2.1%</div>
                            <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å –≤–æ–∑–≤—Ä–∞—Ç–æ–≤</div>
                        </div>
                    </div>
                </div>

                <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤ -->
                <div class="admin-section">
                    <h3>üéÅ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="total-gifts">156</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–¥–∞—Ä–∫–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="gift-views">8,742</div>
                            <div class="stat-label">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ø–æ–¥–∞—Ä–∫–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="gift-conversion">4.8%</div>
                            <div class="stat-label">–ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫–∏</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="top-gift-price">2,450 TON</div>
                            <div class="stat-label">–°–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø–æ–¥–∞—Ä–æ–∫</div>
                        </div>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
                <div class="admin-section">
                    <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                    <div class="form-group">
                        <input type="text" class="search-input" id="user-search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —é–∑–µ—Ä–Ω–µ–π–º—É..." oninput="searchUsers()">
                    </div>
                    <div id="users-list" style="max-height: 300px; overflow-y: auto; margin-top: 15px;">
                        <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>

                <!-- –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="admin-section" id="user-details-section" style="display: none;">
                    <h3>üë§ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                    <div id="user-details">
                        <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>

                <!-- –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ -->
                <div class="admin-section">
                    <h3>üîî –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h3>
                    <div id="system-alerts">
                        <div class="alert-item success">
                            <i class="fas fa-check-circle"></i>
                            <span>–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</span>
                        </div>
                        <div class="alert-item warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>–ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è —Å–µ–≥–æ–¥–Ω—è</span>
                        </div>
                        <div class="alert-item info">
                            <i class="fas fa-info-circle"></i>
                            <span>5 –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å</span>
                        </div>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ -->
                <div class="admin-section">
                    <h3>‚ö° –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞</h3>
                    <div class="toggle-buttons">
                        <button class="toggle-btn enabled" id="toggle-buying" onclick="toggleSetting('buying')">
                            –ü–æ–∫—É–ø–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã ‚úÖ
                        </button>
                        <button class="toggle-btn enabled" id="toggle-selling" onclick="toggleSetting('selling')">
                            –ü—Ä–æ–¥–∞–∂–∏ –≤–∫–ª—é—á–µ–Ω—ã ‚úÖ
                        </button>
                        <button class="toggle-btn enabled" id="toggle-withdrawals" onclick="toggleSetting('withdrawals')">
                            –í—ã–≤–æ–¥ –≤–∫–ª—é—á–µ–Ω ‚úÖ
                        </button>
                        <button class="toggle-btn enabled" id="toggle-notifications" onclick="toggleSetting('notifications')">
                            –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã ‚úÖ
                        </button>
                    </div>
                </div>

                <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="admin-section">
                    <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="sendPromotion()">
                            <i class="fas fa-bullhorn"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–∫—Ü–∏—é
                        </button>
                        <button class="action-btn secondary" onclick="updateGiftPrices()">
                            <i class="fas fa-tags"></i> –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã
                        </button>
                        <button class="action-btn secondary" onclick="runMaintenance()">
                            <i class="fas fa-tools"></i> –¢–µ—Ö. –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
                        </button>
                        <button class="action-btn secondary" onclick="backupDatabase()">
                            <i class="fas fa-database"></i> –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
                        </button>
                    </div>
                </div>

                <!-- –†–∞—Å—Å—ã–ª–∫–∞ -->
                <div class="admin-section">
                    <h3>üì¢ –†–∞—Å—Å—ã–ª–∫–∞</h3>
                    <div class="form-group">
                        <textarea class="form-input" id="broadcast-message" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏..." rows="4"></textarea>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="sendBroadcast('all')">
                            <i class="fas fa-users"></i> –í—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
                        </button>
                        <button class="action-btn secondary" onclick="sendBroadcast('active')">
                            <i class="fas fa-bolt"></i> –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–º
                        </button>
                        <button class="action-btn secondary" onclick="sendBroadcast('buyers')">
                            <i class="fas fa-shopping-cart"></i> –¢–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
                        </button>
                    </div>
                </div>

                <!-- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
                <div class="admin-section">
                    <h3>üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="exportData('users')">
                            <i class="fas fa-users"></i> –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        </button>
                        <button class="action-btn secondary" onclick="exportData('sales')">
                            <i class="fas fa-shopping-cart"></i> –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–¥–∞–∂
                        </button>
                        <button class="action-btn secondary" onclick="exportData('gifts')">
                            <i class="fas fa-gift"></i> –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–¥–∞—Ä–∫–æ–≤
                        </button>
                        <button class="action-btn secondary" onclick="exportData('financial')">
                            <i class="fas fa-chart-line"></i> –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ–¥–∞–∂–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ -->
        <div class="screen" id="sell-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üíé –ü—Ä–æ–¥–∞—Ç—å NFT –ø–æ–¥–∞—Ä–æ–∫</h2>
            
            <div class="search-container">
                <div class="form-group">
                    <label class="form-label">üîó –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à Telegram –∞–∫–∫–∞—É–Ω—Ç</label>
                    <button class="action-btn" onclick="connectTelegramAccount()" style="width: 100%;">
                        üì± –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                    </button>
                </div>

                <div class="form-group">
                    <label class="form-label">üéÅ –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –æ—Ü–µ–Ω–∫–∏</label>
                    <select class="form-select" id="gift-select">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫ --</option>
                        <option value="dragon">–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω</option>
                        <option value="spaceship">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å</option>
                        <option value="crystal">–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">üé® –ú–æ–¥–µ–ª—å –ø–æ–¥–∞—Ä–∫–∞</label>
                    <input type="text" class="form-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏" id="gift-model">
                </div>

                <div class="form-group">
                    <label class="form-label">üåÑ –§–æ–Ω</label>
                    <select class="form-select" id="gift-backdrop">
                        <option value="">–õ—é–±–æ–π —Ñ–æ–Ω</option>
                        <option value="–ó–≤–µ–∑–¥–Ω—ã–π">–ó–≤–µ–∑–¥–Ω—ã–π</option>
                        <option value="–ì–æ—Ä–æ–¥—Å–∫–æ–π">–ì–æ—Ä–æ–¥—Å–∫–æ–π</option>
                        <option value="–ü—Ä–∏—Ä–æ–¥–Ω—ã–π">–ü—Ä–∏—Ä–æ–¥–Ω—ã–π</option>
                        <option value="–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π">–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">‚ú® –£–∑–æ—Ä</label>
                    <select class="form-select" id="gift-symbol">
                        <option value="">–õ—é–±–æ–π —É–∑–æ—Ä</option>
                        <option value="–ó–≤–µ–∑–¥—ã">–ó–≤–µ–∑–¥—ã</option>
                        <option value="–¶–≤–µ—Ç—ã">–¶–≤–µ—Ç—ã</option>
                        <option value="–ì–µ–æ–º–µ—Ç—Ä–∏—è">–ì–µ–æ–º–µ—Ç—Ä–∏—è</option>
                        <option value="–ü–æ–ª–æ—Å—ã">–ü–æ–ª–æ—Å—ã</option>
                    </select>
                </div>

                <button class="action-btn" onclick="evaluateGift()" style="width: 100%;">
                    üí∞ –û—Ü–µ–Ω–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫
                </button>

                <div id="evaluation-result" style="display: none;"></div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∫–∞—Ç–∞–ª–æ–≥–∞ -->
        <div class="screen" id="catalog-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üìö –ö–∞—Ç–∞–ª–æ–≥ NFT –ü–æ–¥–∞—Ä–∫–æ–≤</h2>
            
            <div id="catalog-content">
                <div class="loading">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞ -->
        <div class="screen" id="search-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üîç –ü–æ–∏—Å–∫ NFT –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
            
            <div class="search-container">
                <input type="text" class="search-input" placeholder="üé≠ –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏..." id="search-input">
                <input type="text" class="search-input" placeholder="üåÑ –í–≤–µ–¥–∏—Ç–µ —Ñ–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)..." id="backdrop-input">
                <input type="text" class="search-input" placeholder="‚ú® –í–≤–µ–¥–∏—Ç–µ —É–∑–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)..." id="symbol-input">
                
                <div class="budget-value">üí∞ –ë—é–¥–∂–µ—Ç: <span id="budget-amount">50</span> TON</div>
                <input type="range" class="budget-slider" min="1" max="100000" value="50" id="budget-slider">
                
                <div class="budget-large" id="large-budget" style="display: none;">
                    üöÄ –ü—Ä–µ–º–∏—É–º –±—é–¥–∂–µ—Ç! –ë—É–¥–µ–º –∏—Å–∫–∞—Ç—å –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
                </div>
                
                <button class="action-btn" onclick="performSearch()" style="width: 100%;">
                    üîç –ù–∞–π—Ç–∏ NFT –ø–æ–¥–∞—Ä–∫–∏
                </button>

                <button class="action-btn secondary" onclick="clearSearch()" style="width: 100%; margin-top: 10px;">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫
                </button>
            </div>

            <div id="search-results">
                <div class="loading">üîç –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞...</div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –±—é–¥–∂–µ—Ç–∞ -->
        <div class="screen" id="budget-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏ –±—é–¥–∂–µ—Ç</h2>
            
            <div class="search-container">
                <div class="budget-value" style="font-size: 2rem; color: var(--accent);">
                    <span id="budget-display">50</span> TON
                </div>
                <input type="range" class="budget-slider" min="1" max="100000" value="50" id="budget-setter">
                
                <div class="budget-large" id="budget-large-display" style="display: none;">
                    üíé –ü—Ä–µ–º–∏—É–º —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px;">
                    <button class="action-btn secondary" onclick="setBudget(30)">30 TON</button>
                    <button class="action-btn secondary" onclick="setBudget(100)">100 TON</button>
                    <button class="action-btn secondary" onclick="setBudget(1000)">1000 TON</button>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                    <button class="action-btn secondary" onclick="setBudget(10000)">10,000 TON</button>
                    <button class="action-btn secondary" onclick="setBudget(50000)">50,000 TON</button>
                </div>
                
                <button class="action-btn" onclick="saveBudget()" style="width: 100%; margin-top: 20px;">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±—é–¥–∂–µ—Ç
                </button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø–æ–∫—É–ø–∫–∏ -->
        <div class="screen" id="purchase-screen">
            <button class="back-button" onclick="showScreen('main-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üõí –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏</h2>
            
            <div class="purchase-container">
                <div class="gift-card" id="purchase-gift-card">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞ -->
                </div>
                
                <div class="purchase-form">
                    <div class="form-group">
                        <label class="form-label">üë§ –í–∞—à Telegram —é–∑–µ—Ä–Ω–µ–π–º</label>
                        <input type="text" class="form-input" placeholder="@username" id="username-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">üíº –í–∞—à TON –∫–æ—à–µ–ª–µ–∫</label>
                        <input type="text" class="form-input" placeholder="UQ... –∏–ª–∏ EQC..." id="wallet-input">
                        <div class="form-hint">
                            –ö–∞–∫ –Ω–∞–π—Ç–∏ –∫–æ—à–µ–ª–µ–∫: 
                            <br>‚Ä¢ @Wallet - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ—à–µ–ª–µ–∫ ‚Üí –ê–¥—Ä–µ—Å
                            <br>‚Ä¢ @CryptoBot - –ö–æ—à–µ–ª–µ–∫ ‚Üí TON ‚Üí –ü–æ–ª—É—á–∏—Ç—å ‚Üí –ê–¥—Ä–µ—Å
                        </div>
                    </div>
                    
                    <div class="warning-box">
                        ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ü—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º —É–∫–∞–∑–∞–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ –∏–ª–∏ —é–∑–µ—Ä–Ω–µ–π–º–∞ 
                        –±–æ—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–º –ø–æ–¥–∞—Ä–æ–∫!
                    </div>
                    
                    <div class="purchase-summary">
                        <div class="summary-item">
                            <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–∞—Ä–∫–∞:</span>
                            <span id="summary-price">0 TON</span>
                        </div>
                        <div class="summary-item">
                            <span>–ö–æ–º–∏—Å—Å–∏—è (5%):</span>
                            <span id="summary-fee">0 TON</span>
                        </div>
                        <div class="summary-item total">
                            <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                            <span id="summary-total">0 TON</span>
                        </div>
                    </div>
                    
                    <button class="action-btn" onclick="confirmPurchase()" style="width: 100%;">
                        üí≥ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–∫—É–ø–∫—É
                    </button>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–ø–ª–∞—Ç—ã -->
        <div class="screen" id="payment-screen">
            <button class="back-button" onclick="showScreen('purchase-screen')">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">üí≥ –û–ø–ª–∞—Ç–∞</h2>
            
            <div class="payment-container">
                <div class="payment-info">
                    <h3>–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω—É—é —Å—É–º–º—É:</h3>
                    <div class="payment-amount" id="payment-amount">0 TON</div>
                    
                    <div class="wallet-address" id="wallet-address">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–∞...
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn secondary" onclick="copyWalletAddress()">
                            üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å
                        </button>
                        <button class="action-btn secondary" onclick="openWalletApp()">
                            üì± –û—Ç–∫—Ä—ã—Ç—å –∫–æ—à–µ–ª–µ–∫
                        </button>
                    </div>
                    
                    <div class="payment-steps">
                        <h4>–®–∞–≥–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã:</h4>
                        <ol>
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à TON –∫–æ—à–µ–ª–µ–∫</li>
                            <li>–ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"</li>
                            <li>–í—Å—Ç–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è</li>
                            <li>–í–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω—É—é —Å—É–º–º—É</li>
                            <li>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥</li>
                            <li>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É"</li>
                        </ol>
                    </div>
                    
                    <div class="warning-box">
                        ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –¢–û–õ–¨–ö–û TON! –î—Ä—É–≥–∏–µ —Ç–æ–∫–µ–Ω—ã –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è.
                        –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¢–û–ß–ù–û–ô!
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" onclick="checkPayment()" id="check-payment-btn">
                            üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
        <div class="screen" id="confirmation-screen">
            <div class="confirmation-container">
                <div class="confirmation-icon">‚úÖ</div>
                <h2 style="text-align: center; margin-bottom: 10px;">–ü–æ–∫—É–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
                <p style="text-align: center; margin-bottom: 20px; color: var(--text-secondary);">
                    –í–∞—à –ø–æ–¥–∞—Ä–æ–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
                </p>
                
                <div class="confirmation-details">
                    <div class="detail-item">
                        <span>–ü–æ–¥–∞—Ä–æ–∫:</span>
                        <span id="confirm-gift-name">-</span>
                    </div>
                    <div class="detail-item">
                        <span>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</span>
                        <span id="confirm-username">-</span>
                    </div>
                    <div class="detail-item">
                        <span>–°—É–º–º–∞:</span>
                        <span id="confirm-amount">- TON</span>
                    </div>
                    <div class="detail-item">
                        <span>–°—Ç–∞—Ç—É—Å:</span>
                        <span style="color: var(--success);">–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è</span>
                    </div>
                </div>
                
                <div class="confirmation-message">
                    ‚è≥ –û–∂–∏–¥–∞–π—Ç–µ, –ø–æ–∫–∞ –≤–∞—à –ø–æ–¥–∞—Ä–æ–∫ –±—É–¥–µ—Ç –≤—ã–∫—É–ø–ª–µ–Ω –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ 
                    –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç. –û–±—ã—á–Ω–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 5-15 –º–∏–Ω—É—Ç.
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn" onclick="showScreen('main-screen')">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                    <button class="action-btn secondary" onclick="contactSupport()">
                        üÜò –°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        let currentUser = {
            id: tg.initDataUnsafe.user?.id || 'unknown',
            username: tg.initDataUnsafe.user?.username || '–ê–Ω–æ–Ω–∏–º',
            firstName: tg.initDataUnsafe.user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
        };
        
        let currentBudget = 50;
        let selectedGift = null;
        let currentPurchaseId = null;
        let currentTheme = 'light-purple';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            tg.expand();
            tg.enableClosingConfirmation();
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
            const savedTheme = localStorage.getItem('theme') || 'light-purple';
            applyTheme(savedTheme);
            
            registerUserActivity();
            loadStatistics();
            updateButtonStates();
            setupEventListeners();
            loadUsersList();
        });
        
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã
        function applyTheme(theme) {
            currentTheme = theme;
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏
            const themeBtn = document.getElementById('theme-btn');
            themeBtn.innerHTML = theme === 'dark' ? '<i class="fas fa-moon"></i>' : 
                                theme === 'light' ? '<i class="fas fa-sun"></i>' : 
                                '<i class="fas fa-palette"></i>';
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function switchTheme() {
            const themes = ['dark', 'light', 'light-purple'];
            const currentIndex = themes.indexOf(currentTheme);
            const nextIndex = (currentIndex + 1) % themes.length;
            
            const themeBtn = document.getElementById('theme-btn');
            themeBtn.classList.add('rotating');
            
            setTimeout(() => {
                applyTheme(themes[nextIndex]);
                themeBtn.classList.remove('rotating');
            }, 600);
        }
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function registerUserActivity() {
            // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            console.log('User activity registered:', currentUser);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStatistics() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            setTimeout(() => {
                document.getElementById('total-users').textContent = '1,247';
                document.getElementById('today-online').textContent = '89';
                document.getElementById('daily-turnover').textContent = '2,450 TON';
                document.getElementById('gifts-sold').textContent = '156';
                
                // –ê–¥–º–∏–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                document.getElementById('admin-total-users').textContent = '1,247';
                document.getElementById('admin-total-sales').textContent = '892';
                document.getElementById('admin-total-revenue').textContent = '15,640 TON';
                document.getElementById('admin-active-users').textContent = '89';
                
                // –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                document.getElementById('new-users-today').textContent = '23';
                document.getElementById('avg-session-time').textContent = '8.5–º';
                document.getElementById('conversion-rate').textContent = '12.4%';
                document.getElementById('retention-rate').textContent = '64.7%';
                
                // –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                document.getElementById('avg-order-value').textContent = '127.5 TON';
                document.getElementById('revenue-per-user').textContent = '18.3 TON';
                document.getElementById('profit-margin').textContent = '28.6%';
                document.getElementById('refund-rate').textContent = '2.1%';
                
                // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤
                document.getElementById('total-gifts').textContent = '156';
                document.getElementById('gift-views').textContent = '8,742';
                document.getElementById('gift-conversion').textContent = '4.8%';
                document.getElementById('top-gift-price').textContent = '2,450 TON';
                
            }, 500);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function loadUsersList() {
            const users = [
                { id: 1, username: '@crypto_lover', joined: '2024-01-15', status: 'active', spent: '1,200 TON', purchases: 15 },
                { id: 2, username: '@nft_collector', joined: '2024-01-20', status: 'active', spent: '980 TON', purchases: 12 },
                { id: 3, username: '@gift_master', joined: '2024-02-01', status: 'active', spent: '750 TON', purchases: 8 },
                { id: 4, username: '@ton_enthusiast', joined: '2024-02-05', status: 'inactive', spent: '320 TON', purchases: 3 },
                { id: 5, username: '@web3_guru', joined: '2024-02-10', status: 'active', spent: '1,100 TON', purchases: 11 }
            ];
            
            window.allUsers = users;
            displayUsers(users);
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function displayUsers(users) {
            const usersList = document.getElementById('users-list');
            usersList.innerHTML = '';
            
            users.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                userElement.style.cursor = 'pointer';
                userElement.onclick = () => showUserDetails(user);
                userElement.innerHTML = `
                    <span class="user-name">${user.username}</span>
                    <span class="user-amount">${user.spent}</span>
                `;
                usersList.appendChild(userElement);
            });
        }
        
        // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function searchUsers() {
            const searchTerm = document.getElementById('user-search').value.toLowerCase();
            const filteredUsers = window.allUsers.filter(user => 
                user.username.toLowerCase().includes(searchTerm)
            );
            displayUsers(filteredUsers);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function showUserDetails(user) {
            document.getElementById('users-list').style.display = 'none';
            document.getElementById('user-details-section').style.display = 'block';
            
            const userStats = {
                totalSpent: user.spent,
                giftsPurchased: user.purchases,
                hoursInBot: '42',
                successfulTransactions: '28',
                failedTransactions: '2',
                supportTickets: '3',
                favoriteGifts: ['–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω', '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å', '–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª'],
                purchases: [
                    { id: 1, gift: '–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω', amount: '150 TON', status: 'completed', date: '2024-02-15' },
                    { id: 2, gift: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å', amount: '120 TON', status: 'completed', date: '2024-02-10' },
                    { id: 3, gift: '–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª', amount: '80 TON', status: 'cancelled', date: '2024-02-05' }
                ]
            };
            
            const userDetails = document.getElementById('user-details');
            userDetails.innerHTML = `
                <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                    <h4 style="margin-bottom: 10px; color: var(--accent);">${user.username}</h4>
                    <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${user.joined}</p>
                    <p>–°—Ç–∞—Ç—É—Å: <span style="color: ${user.status === 'active' ? '#10b981' : '#ef4444'}">${user.status === 'active' ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}</span></p>
                </div>
                
                <div class="user-stats-grid">
                    <div class="user-stat-card">
                        <div class="user-stat-value">${userStats.totalSpent}</div>
                        <div class="user-stat-label">–í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
                    </div>
                    <div class="user-stat-card">
                        <div class="user-stat-value">${userStats.giftsPurchased}</div>
                        <div class="user-stat-label">–ü–æ–¥–∞—Ä–∫–æ–≤ –∫—É–ø–ª–µ–Ω–æ</div>
                    </div>
                    <div class="user-stat-card">
                        <div class="user-stat-value">${userStats.hoursInBot} —á</div>
                        <div class="user-stat-label">–í—Ä–µ–º—è –≤ –±–æ—Ç–µ</div>
                    </div>
                    <div class="user-stat-card">
                        <div class="user-stat-value">${userStats.successfulTransactions}/${userStats.failedTransactions}</div>
                        <div class="user-stat-label">–£—Å–ø–µ—à–Ω—ã–µ/–ù–µ—É–¥–∞—á–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</div>
                    </div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4 style="margin-bottom: 10px; color: var(--accent);">üéÅ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫</h4>
                    <div class="user-purchases-list">
                        ${userStats.purchases.map(purchase => `
                            <div class="user-purchase-item">
                                <div>
                                    <div style="font-weight: 600;">${purchase.gift}</div>
                                    <div style="font-size: 0.8rem; opacity: 0.7;">${purchase.date}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: var(--accent);">${purchase.amount}</div>
                                    <div class="purchase-status ${purchase.status}">${purchase.status === 'completed' ? '–ó–∞–≤–µ—Ä—à–µ–Ω–æ' : purchase.status === 'cancelled' ? '–û—Ç–º–µ–Ω–µ–Ω–æ' : '–í –æ–∂–∏–¥–∞–Ω–∏–∏'}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4 style="margin-bottom: 10px; color: var(--accent);">‚ù§Ô∏è –õ—é–±–∏–º—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        ${userStats.favoriteGifts.map(gift => `
                            <span style="background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 8px; font-size: 0.9rem;">${gift}</span>
                        `).join('')}
                    </div>
                </div>
                
                <div style="margin: 20px 0;">
                    <h4 style="margin-bottom: 10px; color: var(--accent);">üìû –û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</h4>
                    <p>–í—Å–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏–π: ${userStats.supportTickets}</p>
                </div>
                
                <button class="action-btn secondary" onclick="backToUsersList()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </button>
            `;
        }
        
        // –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function backToUsersList() {
            document.getElementById('users-list').style.display = 'block';
            document.getElementById('user-details-section').style.display = 'none';
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function toggleSetting(setting) {
            const button = document.getElementById(`toggle-${setting}`);
            const isEnabled = button.classList.contains('enabled');
            
            if (isEnabled) {
                button.classList.remove('enabled');
                button.classList.add('disabled');
                button.innerHTML = button.textContent.replace('‚úÖ', '‚ùå');
            } else {
                button.classList.remove('disabled');
                button.classList.add('enabled');
                button.innerHTML = button.textContent.replace('‚ùå', '‚úÖ');
            }
            
            showNotification(`–ù–∞—Å—Ç—Ä–æ–π–∫–∞ "${getSettingName(setting)}" ${isEnabled ? '–æ—Ç–∫–ª—é—á–µ–Ω–∞' : '–≤–∫–ª—é—á–µ–Ω–∞'}`);
        }
        
        function getSettingName(setting) {
            const names = {
                'buying': '–ü–æ–∫—É–ø–∫–∏',
                'selling': '–ü—Ä–æ–¥–∞–∂–∏',
                'withdrawals': '–í—ã–≤–æ–¥',
                'notifications': '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è'
            };
            return names[setting] || setting;
        }
        
        // –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        function sendPromotion() {
            showNotification('–ó–∞–ø—É—Å–∫ –∞–∫—Ü–∏–∏... –§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info');
        }
        
        function updateGiftPrices() {
            showNotification('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –ø–æ–¥–∞—Ä–∫–æ–≤...', 'info');
        }
        
        function runMaintenance() {
            showNotification('–ó–∞–ø—É—Å–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è...', 'warning');
        }
        
        function backupDatabase() {
            showNotification('–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...', 'success');
        }
        
        // –†–∞—Å—Å—ã–ª–∫–∞
        function sendBroadcast(audience) {
            const message = document.getElementById('broadcast-message').value;
            if (!message.trim()) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏', 'error');
                return;
            }
            
            const audiences = {
                'all': '–≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º',
                'active': '–∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º', 
                'buyers': '–ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º'
            };
            
            showNotification(`–†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ ${audiences[audience]}!`, 'success');
            document.getElementById('broadcast-message').value = '';
        }
        
        // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function exportData(type) {
            const types = {
                'users': '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
                'sales': '–ø—Ä–æ–¥–∞–∂', 
                'gifts': '–ø–æ–¥–∞—Ä–∫–æ–≤',
                'financial': '—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç'
            };
            
            showNotification(`–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö ${types[type]} –∑–∞–ø—É—â–µ–Ω`, 'success');
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        async function updateButtonStates() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
        async function loadRealGifts() {
            showScreen('catalog-screen');
            const catalogContent = document.getElementById('catalog-content');
            catalogContent.innerHTML = '<div class="loading">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</div>';
            
            setTimeout(() => {
                const gifts = [
                    {
                        id: 1,
                        name: '–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω',
                        price: 150,
                        total_price: 157.5,
                        image_url: 'https://via.placeholder.com/120',
                        market: 'Portals',
                        rarity: 'legendary'
                    },
                    {
                        id: 2,
                        name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å',
                        price: 120,
                        total_price: 126,
                        image_url: 'https://via.placeholder.com/120',
                        market: 'GetGems',
                        rarity: 'epic'
                    },
                    {
                        id: 3,
                        name: '–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª',
                        price: 80,
                        total_price: 84,
                        image_url: 'https://via.placeholder.com/120',
                        market: 'Portals',
                        rarity: 'rare'
                    }
                ];
                
                catalogContent.innerHTML = '';
                gifts.forEach(gift => {
                    const giftCard = document.createElement('div');
                    giftCard.className = 'gift-card';
                    giftCard.innerHTML = `
                        <div class="gift-image">
                            <img src="${gift.image_url}" alt="${gift.name}">
                        </div>
                        <div class="gift-info">
                            <h3 class="gift-name">${gift.name}</h3>
                            <div class="gift-price">${gift.total_price} TON</div>
                            <div class="gift-market">${gift.market}</div>
                            <div class="gift-rarity ${gift.rarity}">${getRarityName(gift.rarity)}</div>
                        </div>
                        <button class="buy-btn" onclick="selectGift(${JSON.stringify(gift).replace(/"/g, '&quot;')})">
                            üõí –ö—É–ø–∏—Ç—å
                        </button>
                    `;
                    catalogContent.appendChild(giftCard);
                });
            }, 1000);
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityName(rarity) {
            const names = {
                'common': '–û–±—ã—á–Ω—ã–π',
                'rare': '–†–µ–¥–∫–∏–π',
                'epic': '–≠–ø–∏—á–µ—Å–∫–∏–π',
                'legendary': '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'
            };
            return names[rarity] || rarity;
        }
        
        // –í—ã–±–æ—Ä –ø–æ–¥–∞—Ä–∫–∞
        function selectGift(gift) {
            selectedGift = gift;
            showScreen('purchase-screen');
            
            const giftCard = document.getElementById('purchase-gift-card');
            giftCard.innerHTML = `
                <div class="gift-image">
                    <img src="${gift.image_url}" alt="${gift.name}">
                </div>
                <div class="gift-info">
                    <h3 class="gift-name">${gift.name}</h3>
                    <div class="gift-price">${gift.total_price} TON</div>
                    <div class="gift-market">${gift.market}</div>
                </div>
            `;
            
            document.getElementById('summary-price').textContent = gift.price + ' TON';
            document.getElementById('summary-fee').textContent = (gift.total_price - gift.price).toFixed(2) + ' TON';
            document.getElementById('summary-total').textContent = gift.total_price + ' TON';
        }
        
        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏
        function confirmPurchase() {
            const username = document.getElementById('username-input').value.trim();
            const wallet = document.getElementById('wallet-input').value.trim();
            
            if (!username) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Telegram —é–∑–µ—Ä–Ω–µ–π–º', 'error');
                return;
            }
            
            if (!wallet) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à TON –∫–æ—à–µ–ª–µ–∫', 'error');
                return;
            }
            
            currentPurchaseId = `purchase_${Date.now()}_${currentUser.id}`;
            
            document.getElementById('payment-amount').textContent = selectedGift.total_price + ' TON';
            document.getElementById('wallet-address').textContent = 'UQAaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa';
            
            showScreen('payment-screen');
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø–ª–∞—Ç—ã
        async function checkPayment() {
            const checkBtn = document.getElementById('check-payment-btn');
            checkBtn.disabled = true;
            checkBtn.innerHTML = 'üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º...';
            
            setTimeout(() => {
                document.getElementById('confirm-gift-name').textContent = selectedGift.name;
                document.getElementById('confirm-username').textContent = document.getElementById('username-input').value;
                document.getElementById('confirm-amount').textContent = selectedGift.total_price + ' TON';
                
                showScreen('confirmation-screen');
                
                checkBtn.disabled = false;
                checkBtn.innerHTML = 'üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É';
            }, 2000);
        }
        
        // –ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤
        async function performSearch() {
            const searchTerm = document.getElementById('search-input').value;
            const maxPrice = currentBudget;
            
            const resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = '<div class="loading">üîç –ò—â–µ–º –ø–æ–¥–∞—Ä–∫–∏...</div>';
            
            setTimeout(() => {
                const gifts = [
                    { name: '–ó–æ–ª–æ—Ç–æ–π –¥—Ä–∞–∫–æ–Ω', price: '150 TON', rarity: 'legendary' },
                    { name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å', price: '120 TON', rarity: 'epic' },
                    { name: '–í–æ–ª—à–µ–±–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª', price: '80 TON', rarity: 'rare' }
                ];
                
                const filteredGifts = gifts.filter(gift => 
                    (!searchTerm || gift.name.toLowerCase().includes(searchTerm.toLowerCase())) &&
                    (parseInt(gift.price) <= parseInt(maxPrice))
                );
                
                if (filteredGifts.length === 0) {
                    resultsContainer.innerHTML = '<div class="no-results">üòî –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    return;
                }
                
                resultsContainer.innerHTML = filteredGifts.map(gift => `
                    <div class="gift-card">
                        <div class="gift-image">
                            <img src="https://via.placeholder.com/120" alt="${gift.name}">
                        </div>
                        <div class="gift-info">
                            <h3 class="gift-name">${gift.name}</h3>
                            <div class="gift-price">${gift.price}</div>
                            <div class="gift-rarity ${gift.rarity}">${getRarityName(gift.rarity)}</div>
                            <button class="buy-btn" onclick="selectGift(${JSON.stringify({...gift, total_price: gift.price, image_url: 'https://via.placeholder.com/120', market: 'Portals'}).replace(/"/g, '&quot;')})">
                                üõí –ö—É–ø–∏—Ç—å
                            </button>
                        </div>
                    </div>
                `).join('');
            }, 1500);
        }
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—é–¥–∂–µ—Ç–∞
        function setBudget(amount) {
            currentBudget = amount;
            document.getElementById('budget-setter').value = amount;
            document.getElementById('budget-display').textContent = amount.toLocaleString();
            
            const largeBudgetDisplay = document.getElementById('budget-large-display');
            if (amount >= 10000) {
                largeBudgetDisplay.style.display = 'block';
            } else {
                largeBudgetDisplay.style.display = 'none';
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
        function saveBudget() {
            showNotification(`–ë—é–¥–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${currentBudget.toLocaleString()} TON`);
            showScreen('main-screen');
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            const budgetSlider = document.getElementById('budget-slider');
            if (budgetSlider) {
                budgetSlider.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    document.getElementById('budget-amount').textContent = value.toLocaleString();
                    currentBudget = value;
                    
                    const largeBudget = document.getElementById('large-budget');
                    if (value >= 10000) {
                        largeBudget.style.display = 'block';
                    } else {
                        largeBudget.style.display = 'none';
                    }
                });
            }
            
            const budgetSetter = document.getElementById('budget-setter');
            if (budgetSetter) {
                budgetSetter.addEventListener('input', function() {
                    const value = parseInt(this.value);
                    setBudget(value);
                });
            }
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function copyWalletAddress() {
            const walletAddress = document.getElementById('wallet-address').textContent;
            navigator.clipboard.writeText(walletAddress).then(() => {
                showNotification('–ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            });
        }
        
        function openWalletApp() {
            showNotification('–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ—à–µ–ª—å–∫–∞...');
        }
        
        function contactSupport() {
            tg.openTelegramLink('https://t.me/GiftPrisesHelperBot');
        }
        
        function connectTelegramAccount() {
            showNotification('–§—É–Ω–∫—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        function evaluateGift() {
            showNotification('–§—É–Ω–∫—Ü–∏—è –æ—Ü–µ–Ω–∫–∏ –ø–æ–¥–∞—Ä–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        function clearSearch() {
            document.getElementById('search-input').value = '';
            document.getElementById('backdrop-input').value = '';
            document.getElementById('symbol-input').value = '';
            document.getElementById('budget-slider').value = 50;
            document.getElementById('budget-amount').textContent = '50';
            document.getElementById('search-results').innerHTML = '<div class="loading">üîç –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞...</div>';
            currentBudget = 50;
        }
    </script>
</body>
</html>
